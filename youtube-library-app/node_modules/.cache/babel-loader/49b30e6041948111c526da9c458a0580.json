{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\servi\\\\Documents\\\\EZProjet\\\\YoutubeLibrary\\\\youtube-library-app\\\\src\\\\components\\\\Common\\\\videoTile.js\";\nimport React from 'react';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport { Icon, Button, Transition } from 'semantic-ui-react';\nimport Divider from '@material-ui/core/Divider';\nimport { store } from '../../store';\nimport { showVideoPlayerAction, openCloseModalAction, updateListReducerAction, toggleVisibleAction } from '../../actions';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport '../styles/components.css';\n\nconst axios = require('axios');\n\nexport default class VideoTile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.inputName = '';\n    this.visible = true;\n    this.animation = '';\n  }\n\n  openModal() {\n    //Ask for the opening of the renaming modal with the tile info\n    var video = {\n      title: this.props.data.title.concat(this.props.data.subtitle),\n      thumbnails: this.props.data.thumbnails,\n      id: this.props.data.id\n    };\n    store.dispatch(openCloseModalAction('open', video));\n  }\n\n  handlePlay() {\n    //Ask for the opening of the embed video player with the tile info\n    store.dispatch(toggleVisibleAction());\n    this.dispatchShowVideoPlayer({\n      title: this.props.data.title.concat(this.props.data.subtitle),\n      thumbnails: this.props.data.thumbnails,\n      id: this.props.data.id\n    });\n  }\n\n  handleDelete() {\n    //Delete the video from the library\n    var self = this;\n    this.animation = 'drop';\n    this.visible = !this.visible;\n    axios.post('http://localhost:2999/remove', {\n      //Post on the server with info about the video to delete\n      body: {\n        user: store.getState().User.user,\n        rmid: this.props.data.id\n      }\n    }).then(function (response) {\n      var side;\n      if (self.props.side === 'OnLeft') side = 'leftPanel';\n      if (self.props.side === 'OnRight') side = 'rightPanel';\n      self.dispatchUpdateList(side, response.data.videos); //Update Library video list with new video list got from server\n    }).catch(function (err) {\n      console.log(err);\n    });\n    toast.success(\"Video removed from your library !\");\n  }\n\n  handleAdd() {\n    //Add the video to the library\n    var self = this;\n    var alreadyIn = false;\n    var videos = store.getState().DataLoading.leftPanel.videos;\n\n    for (let i = 0; i < videos.length; i++) {\n      if (this.props.data.id === videos[i].id) {\n        alreadyIn = true;\n        break;\n      }\n    }\n\n    if (alreadyIn) {\n      //Display an error animation and an error toast if the video is already in the library\n      this.animation = 'shake';\n      this.visible = !this.visible;\n      toast.error(\"Video already in library !\");\n      this.dispatchUpdateList('leftPanel', videos);\n    } else {\n      //Else add the video to the library \n      this.animation = 'pulse';\n      this.visible = !this.visible;\n      toast.success(\"Video added to library !\");\n      axios.post('http://localhost:2999/add', {\n        //Post on the server to update the library by adding the video\n        user: store.getState().User.user,\n        addid: this.props.data.id,\n        addtitle: this.props.data.title.concat(this.props.data.subtitle),\n        thumbnails: JSON.stringify(this.props.data.thumbnails)\n      }).then(function (response) {\n        self.dispatchUpdateList('leftPanel', response.data.videos); //Then update state with the new video list\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }\n\n  dispatchUpdateList(panel, videos) {\n    store.dispatch(updateListReducerAction(panel, videos));\n  }\n\n  dispatchShowVideoPlayer(video) {\n    //Set state to show the emebd player of this video \n    var actualRightDisp = store.getState().RightDisplay;\n\n    for (var key in actualRightDisp) {\n      //Find actual display on right panel and turn it off\n      if (actualRightDisp[key]) actualRightDisp[key] = false;\n    }\n\n    actualRightDisp.videoToPlay = video;\n    store.dispatch(toggleVisibleAction());\n    store.dispatch(showVideoPlayerAction(actualRightDisp));\n  }\n\n  render() {\n    var thumbsize;\n    if (this.props.side === 'OnLeft') thumbsize = 'medium';else thumbsize = 'high';\n    var buttons = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    });\n\n    if (this.props.side === 'OnLeft') {\n      //Load buttons and info bar to display on the VideoTile (Library list: Rename, Remove and Play buttons)\n      buttons = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(GridListTileBar, {\n        title: this.props.data.title,\n        subtitle: this.props.data.subtitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"editPopup\",\n        icon: true,\n        onClick: () => {\n          this.openModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(Button, {\n        className: \"deletePopup\",\n        icon: true,\n        onClick: () => {\n          this.handleDelete();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: () => {\n          this.handlePlay();\n        },\n        icon: true,\n        className: \"videoPlayButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        size: \"huge\",\n        name: \"youtube play\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"myCenterTriangle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }));\n    } else {\n      buttons = //Load buttons and info bar to display on the VideoTile (Results list: Add and Play buttons)\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(GridListTileBar, {\n        title: this.props.data.title,\n        subtitle: this.props.data.subtitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"addPopup\",\n        icon: true,\n        onClick: () => {\n          this.handleAdd();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        size: \"big\",\n        name: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: () => {\n          this.handlePlay();\n        },\n        icon: true,\n        className: \"videoPlayButtonRight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        size: \"massive\",\n        name: \"youtube play\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"myBigCenterTriangle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(Transition, {\n      animation: this.animation,\n      duration: 500,\n      visible: this.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'tileContainer' + this.props.side,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(GridListTile, {\n      key: this.props.data.id,\n      cols: 1,\n      className: this.props.gridTileClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.props.data.thumbnails[thumbsize].url,\n      className: this.props.side,\n      alt: this.props.data.title.concat(this.props.data.subtitle),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), (this.props.side === 'OnLeft' || this.props.side === 'OnRight' && !store.getState().DataLoading.rightPanel.isLoading) && buttons), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/servi/Documents/EZProjet/YoutubeLibrary/youtube-library-app/src/components/Common/videoTile.js"],"names":["React","GridListTile","GridListTileBar","Icon","Button","Transition","Divider","store","showVideoPlayerAction","openCloseModalAction","updateListReducerAction","toggleVisibleAction","toast","axios","require","VideoTile","Component","constructor","props","inputName","visible","animation","openModal","video","title","data","concat","subtitle","thumbnails","id","dispatch","handlePlay","dispatchShowVideoPlayer","handleDelete","self","post","body","user","getState","User","rmid","then","response","side","dispatchUpdateList","videos","catch","err","console","log","success","handleAdd","alreadyIn","DataLoading","leftPanel","i","length","error","addid","addtitle","JSON","stringify","panel","actualRightDisp","RightDisplay","key","videoToPlay","render","thumbsize","buttons","gridTileClass","url","rightPanel","isLoading"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,UAAvB,QAAyC,mBAAzC;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAAQC,KAAR,QAAoB,aAApB;AACA,SAAQC,qBAAR,EAA+BC,oBAA/B,EAAqDC,uBAArD,EAA8EC,mBAA9E,QAAwG,eAAxG;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAO,uCAAP;AACA,OAAO,kCAAP;AACA,OAAO,0BAAP;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAMA,eAAe,MAAMC,SAAN,SAAwBf,KAAK,CAACgB,SAA9B,CAAwC;AAEnDC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AAEA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,OAAL,GAAc,IAAd;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AAEDC,EAAAA,SAAS,GAAE;AAAmC;AAC5C,QAAIC,KAAK,GAAG;AACVC,MAAAA,KAAK,EAAG,KAAKN,KAAL,CAAWO,IAAX,CAAgBD,KAAhB,CAAsBE,MAAtB,CAA6B,KAAKR,KAAL,CAAWO,IAAX,CAAgBE,QAA7C,CADE;AAEVC,MAAAA,UAAU,EAAE,KAAKV,KAAL,CAAWO,IAAX,CAAgBG,UAFlB;AAGVC,MAAAA,EAAE,EAAE,KAAKX,KAAL,CAAWO,IAAX,CAAgBI;AAHV,KAAZ;AAKAtB,IAAAA,KAAK,CAACuB,QAAN,CAAerB,oBAAoB,CAAC,MAAD,EAASc,KAAT,CAAnC;AACD;;AAGDQ,EAAAA,UAAU,GAAE;AAAkC;AAC5CxB,IAAAA,KAAK,CAACuB,QAAN,CAAenB,mBAAmB,EAAlC;AACA,SAAKqB,uBAAL,CAA6B;AAC3BR,MAAAA,KAAK,EAAE,KAAKN,KAAL,CAAWO,IAAX,CAAgBD,KAAhB,CAAsBE,MAAtB,CAA6B,KAAKR,KAAL,CAAWO,IAAX,CAAgBE,QAA7C,CADoB;AAE3BC,MAAAA,UAAU,EAAE,KAAKV,KAAL,CAAWO,IAAX,CAAgBG,UAFD;AAG3BC,MAAAA,EAAE,EAAE,KAAKX,KAAL,CAAWO,IAAX,CAAgBI;AAHO,KAA7B;AAKD;;AAEDI,EAAAA,YAAY,GAAG;AAA+B;AAC5C,QAAIC,IAAI,GAAG,IAAX;AACA,SAAKb,SAAL,GAAiB,MAAjB;AACA,SAAKD,OAAL,GAAe,CAAC,KAAKA,OAArB;AACFP,IAAAA,KAAK,CAACsB,IAAN,CAAW,8BAAX,EAA2C;AAAG;AAC5CC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE9B,KAAK,CAAC+B,QAAN,GAAiBC,IAAjB,CAAsBF,IADxB;AAEJG,QAAAA,IAAI,EAAE,KAAKtB,KAAL,CAAWO,IAAX,CAAgBI;AAFlB;AADmC,KAA3C,EAMCY,IAND,CAMM,UAASC,QAAT,EAAmB;AACvB,UAAIC,IAAJ;AACA,UAAGT,IAAI,CAAChB,KAAL,CAAWyB,IAAX,KAAoB,QAAvB,EACEA,IAAI,GAAG,WAAP;AAEF,UAAGT,IAAI,CAAChB,KAAL,CAAWyB,IAAX,KAAoB,SAAvB,EACEA,IAAI,GAAG,YAAP;AAEFT,MAAAA,IAAI,CAACU,kBAAL,CAAwBD,IAAxB,EAA8BD,QAAQ,CAACjB,IAAT,CAAcoB,MAA5C,EARuB,CAQiC;AACzD,KAfD,EAgBCC,KAhBD,CAgBO,UAASC,GAAT,EAAc;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAlBD;AAoBAnC,IAAAA,KAAK,CAACsC,OAAN,CAAc,mCAAd;AAEC;;AAEDC,EAAAA,SAAS,GAAG;AAA0C;AACpD,QAAIjB,IAAI,GAAG,IAAX;AACA,QAAIkB,SAAS,GAAG,KAAhB;AACA,QAAIP,MAAM,GAAGtC,KAAK,CAAC+B,QAAN,GAAiBe,WAAjB,CAA6BC,SAA7B,CAAuCT,MAApD;;AAEA,SAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,MAAM,CAACW,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC,UAAG,KAAKrC,KAAL,CAAWO,IAAX,CAAgBI,EAAhB,KAAuBgB,MAAM,CAACU,CAAD,CAAN,CAAU1B,EAApC,EAAuC;AACrCuB,QAAAA,SAAS,GAAG,IAAZ;AACA;AACD;AACF;;AACD,QAAGA,SAAH,EAAa;AAAuC;AAClD,WAAK/B,SAAL,GAAiB,OAAjB;AACA,WAAKD,OAAL,GAAe,CAAC,KAAKA,OAArB;AACAR,MAAAA,KAAK,CAAC6C,KAAN,CAAY,4BAAZ;AACA,WAAKb,kBAAL,CAAwB,WAAxB,EAAqCC,MAArC;AACD,KALD,MAMK;AAA+C;AAElD,WAAKxB,SAAL,GAAiB,OAAjB;AACA,WAAKD,OAAL,GAAe,CAAC,KAAKA,OAArB;AAEAR,MAAAA,KAAK,CAACsC,OAAN,CAAc,0BAAd;AACArC,MAAAA,KAAK,CAACsB,IAAN,CAAW,2BAAX,EAAwC;AAAU;AAC9CE,QAAAA,IAAI,EAAE9B,KAAK,CAAC+B,QAAN,GAAiBC,IAAjB,CAAsBF,IADQ;AAEpCqB,QAAAA,KAAK,EAAE,KAAKxC,KAAL,CAAWO,IAAX,CAAgBI,EAFa;AAGpC8B,QAAAA,QAAQ,EAAE,KAAKzC,KAAL,CAAWO,IAAX,CAAgBD,KAAhB,CAAsBE,MAAtB,CAA6B,KAAKR,KAAL,CAAWO,IAAX,CAAgBE,QAA7C,CAH0B;AAIpCC,QAAAA,UAAU,EAAEgC,IAAI,CAACC,SAAL,CAAe,KAAK3C,KAAL,CAAWO,IAAX,CAAgBG,UAA/B;AAJwB,OAAxC,EAMCa,IAND,CAMM,UAASC,QAAT,EAAmB;AACvBR,QAAAA,IAAI,CAACU,kBAAL,CAAwB,WAAxB,EAAqCF,QAAQ,CAACjB,IAAT,CAAcoB,MAAnD,EADuB,CACuC;AAC/D,OARD,EASCC,KATD,CASO,UAASC,GAAT,EAAc;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAXD;AAYD;AACF;;AAEDH,EAAAA,kBAAkB,CAACkB,KAAD,EAAQjB,MAAR,EAAgB;AAChCtC,IAAAA,KAAK,CAACuB,QAAN,CAAepB,uBAAuB,CAACoD,KAAD,EAAQjB,MAAR,CAAtC;AACH;;AAECb,EAAAA,uBAAuB,CAACT,KAAD,EAAQ;AAA2B;AAExD,QAAIwC,eAAe,GAAGxD,KAAK,CAAC+B,QAAN,GAAiB0B,YAAvC;;AAEA,SAAI,IAAIC,GAAR,IAAeF,eAAf,EAA+B;AAAyB;AACtD,UAAGA,eAAe,CAACE,GAAD,CAAlB,EACEF,eAAe,CAACE,GAAD,CAAf,GAAuB,KAAvB;AACH;;AACDF,IAAAA,eAAe,CAACG,WAAhB,GAA8B3C,KAA9B;AACAhB,IAAAA,KAAK,CAACuB,QAAN,CAAenB,mBAAmB,EAAlC;AACAJ,IAAAA,KAAK,CAACuB,QAAN,CAAetB,qBAAqB,CAACuD,eAAD,CAApC;AACD;;AAECI,EAAAA,MAAM,GAAG;AAEP,QAAIC,SAAJ;AACA,QAAG,KAAKlD,KAAL,CAAWyB,IAAX,KAAoB,QAAvB,EACEyB,SAAS,GAAG,QAAZ,CADF,KAGEA,SAAS,GAAG,MAAZ;AAEF,QAAIC,OAAO,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd;;AAEA,QAAG,KAAKnD,KAAL,CAAWyB,IAAX,KAAoB,QAAvB,EAAiC;AAA+B;AAC9D0B,MAAAA,OAAO,GACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,KAAK,EAAE,KAAKnD,KAAL,CAAWO,IAAX,CAAgBD,KAAxC;AAA+C,QAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWO,IAAX,CAAgBE,QAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,WAAlB;AAA8B,QAAA,IAAI,MAAlC;AAAmC,QAAA,OAAO,EAAE,MAAM;AAAC,eAAKL,SAAL;AAAiB,SAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,EAKE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,aAAlB;AAAgC,QAAA,IAAI,MAApC;AAAqC,QAAA,OAAO,EAAE,MAAM;AAAC,eAAKW,YAAL;AAAoB,SAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CALF,EAQE,oBAAC,MAAD;AAAS,QAAA,OAAO,EAAI,MAAM;AAAC,eAAKF,UAAL;AAAkB,SAA7C;AAA+C,QAAA,IAAI,MAAnD;AAAoD,QAAA,SAAS,EAAC,iBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAO,QAAA,IAAI,EAAE,MAAb;AAAqB,QAAA,IAAI,EAAC,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CARF,EAWE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXF,CADF;AAcD,KAfD,MAiBK;AACHsC,MAAAA,OAAO,GAAuD;AAC5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,KAAK,EAAE,KAAKnD,KAAL,CAAWO,IAAX,CAAgBD,KAAxC;AAA+C,QAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWO,IAAX,CAAgBE,QAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAG,UAApB;AAA+B,QAAA,IAAI,MAAnC;AAAoC,QAAA,OAAO,EAAG,MAAM;AAAC,eAAKwB,SAAL;AAAiB,SAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAO,QAAA,IAAI,EAAG,KAAd;AAAoB,QAAA,IAAI,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,EAKE,oBAAC,MAAD;AAAS,QAAA,OAAO,EAAI,MAAM;AAAC,eAAKpB,UAAL;AAAkB,SAA7C;AAA+C,QAAA,IAAI,MAAnD;AAAoD,QAAA,SAAS,EAAC,sBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAO,QAAA,IAAI,EAAE,SAAb;AAAwB,QAAA,IAAI,EAAC,cAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CALF,EAQE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADF;AAWD;;AAED,WAEE,oBAAC,UAAD;AACA,MAAA,SAAS,EAAE,KAAKV,SADhB;AAEA,MAAA,QAAQ,EAAE,GAFV;AAGA,MAAA,OAAO,EAAE,KAAKD,OAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE;AAAK,MAAA,SAAS,EAAE,kBAAgB,KAAKF,KAAL,CAAWyB,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AAAe,MAAA,GAAG,EAAE,KAAKzB,KAAL,CAAWO,IAAX,CAAgBI,EAApC;AAAwC,MAAA,IAAI,EAAE,CAA9C;AAAiD,MAAA,SAAS,EAAE,KAAKX,KAAL,CAAWoD,aAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAE,KAAKpD,KAAL,CAAWO,IAAX,CAAgBG,UAAhB,CAA2BwC,SAA3B,EAAsCG,GAAhD;AAAqD,MAAA,SAAS,EAAE,KAAKrD,KAAL,CAAWyB,IAA3E;AAAiF,MAAA,GAAG,EAAE,KAAKzB,KAAL,CAAWO,IAAX,CAAgBD,KAAhB,CAAsBE,MAAtB,CAA6B,KAAKR,KAAL,CAAWO,IAAX,CAAgBE,QAA7C,CAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEI,CAAC,KAAKT,KAAL,CAAWyB,IAAX,KAAoB,QAApB,IAAkC,KAAKzB,KAAL,CAAWyB,IAAX,KAAoB,SAArB,IAAoC,CAACpC,KAAK,CAAC+B,QAAN,GAAiBe,WAAjB,CAA6BmB,UAA7B,CAAwCC,SAA/G,KACAJ,OAHJ,CADF,EAOE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CALF,CAFF;AAkBD;;AA3KgD","sourcesContent":["import React from 'react';\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport { Icon, Button, Transition } from 'semantic-ui-react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {store} from '../../store';\r\nimport {showVideoPlayerAction, openCloseModalAction, updateListReducerAction, toggleVisibleAction} from '../../actions';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport '../styles/components.css';\r\n\r\nconst axios = require('axios');\r\n\r\n\r\n\r\n\r\n\r\nexport default class VideoTile extends React.Component {\r\n\r\n    constructor(props){\r\n      super(props);\r\n\r\n      this.inputName = '';\r\n      this.visible= true;\r\n      this.animation = ''\r\n    }\r\n\r\n    openModal(){                                  //Ask for the opening of the renaming modal with the tile info\r\n      var video = {\r\n        title:  this.props.data.title.concat(this.props.data.subtitle),\r\n        thumbnails: this.props.data.thumbnails,\r\n        id: this.props.data.id\r\n      } \r\n      store.dispatch(openCloseModalAction('open', video));\r\n    }\r\n\r\n\r\n    handlePlay(){                                 //Ask for the opening of the embed video player with the tile info\r\n      store.dispatch(toggleVisibleAction())\r\n      this.dispatchShowVideoPlayer({\r\n        title: this.props.data.title.concat(this.props.data.subtitle),\r\n        thumbnails: this.props.data.thumbnails,\r\n        id: this.props.data.id\r\n      });\r\n    }\r\n\r\n    handleDelete() {                              //Delete the video from the library\r\n      var self = this;\r\n      this.animation = 'drop';\r\n      this.visible = !this.visible;\r\n    axios.post('http://localhost:2999/remove', {  //Post on the server with info about the video to delete\r\n      body: {\r\n        user: store.getState().User.user,\r\n        rmid: this.props.data.id\r\n      }\r\n    })\r\n    .then(function(response) {\r\n      var side;\r\n      if(self.props.side === 'OnLeft')\r\n        side = 'leftPanel';\r\n      \r\n      if(self.props.side === 'OnRight')\r\n        side = 'rightPanel';\r\n      \r\n      self.dispatchUpdateList(side, response.data.videos);    //Update Library video list with new video list got from server\r\n    })\r\n    .catch(function(err) {\r\n      console.log(err);\r\n    })\r\n\r\n    toast.success(\"Video removed from your library !\");\r\n\r\n    }\r\n\r\n    handleAdd() {                                         //Add the video to the library\r\n      var self = this;\r\n      var alreadyIn = false;\r\n      var videos = store.getState().DataLoading.leftPanel.videos;\r\n\r\n      for (let i = 0; i < videos.length; i++) {\r\n        if(this.props.data.id === videos[i].id){\r\n          alreadyIn = true;\r\n          break;\r\n        }\r\n      }\r\n      if(alreadyIn){                                      //Display an error animation and an error toast if the video is already in the library\r\n        this.animation = 'shake';\r\n        this.visible = !this.visible;\r\n        toast.error(\"Video already in library !\");        \r\n        this.dispatchUpdateList('leftPanel', videos);\r\n      }\r\n      else {                                              //Else add the video to the library \r\n\r\n        this.animation = 'pulse';\r\n        this.visible = !this.visible;\r\n\r\n        toast.success(\"Video added to library !\")\r\n        axios.post('http://localhost:2999/add', {         //Post on the server to update the library by adding the video\r\n            user: store.getState().User.user,\r\n            addid: this.props.data.id,\r\n            addtitle: this.props.data.title.concat(this.props.data.subtitle),\r\n            thumbnails: JSON.stringify(this.props.data.thumbnails)\r\n        })\r\n        .then(function(response) {\r\n          self.dispatchUpdateList('leftPanel', response.data.videos);   //Then update state with the new video list\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        })\r\n      }\r\n    }\r\n\r\n    dispatchUpdateList(panel, videos) {\r\n      store.dispatch(updateListReducerAction(panel, videos));\r\n  }\r\n\r\n    dispatchShowVideoPlayer(video) {                          //Set state to show the emebd player of this video \r\n\r\n      var actualRightDisp = store.getState().RightDisplay;\r\n\r\n      for(var key in actualRightDisp){                        //Find actual display on right panel and turn it off\r\n        if(actualRightDisp[key])\r\n          actualRightDisp[key] = false;\r\n      }\r\n      actualRightDisp.videoToPlay = video;\r\n      store.dispatch(toggleVisibleAction());\r\n      store.dispatch(showVideoPlayerAction(actualRightDisp));\r\n    }\r\n\r\n      render() {\r\n\r\n        var thumbsize;\r\n        if(this.props.side === 'OnLeft')\r\n          thumbsize = 'medium';\r\n        else \r\n          thumbsize = 'high';\r\n\r\n        var buttons = <div />;\r\n\r\n        if(this.props.side === 'OnLeft') {                              //Load buttons and info bar to display on the VideoTile (Library list: Rename, Remove and Play buttons)\r\n          buttons =\r\n            <div>\r\n              <GridListTileBar title={this.props.data.title} subtitle={this.props.data.subtitle}  />\r\n              <Button className='editPopup' icon onClick={() => {this.openModal()}}> \r\n                <Icon name='edit' />\r\n              </Button>\r\n              <Button className='deletePopup' icon onClick={() => {this.handleDelete()}}> \r\n                <Icon name='delete' />\r\n              </Button>\r\n              <Button  onClick = {() => {this.handlePlay()}} icon className='videoPlayButton' > \r\n                <Icon  size ='huge'  name='youtube play' /> \r\n              </Button>\r\n              <div className='myCenterTriangle' />\r\n            </div>\r\n        }\r\n\r\n        else {                                                            \r\n          buttons =                                                     //Load buttons and info bar to display on the VideoTile (Results list: Add and Play buttons)\r\n            <div>\r\n              <GridListTileBar title={this.props.data.title} subtitle={this.props.data.subtitle}  />\r\n              <Button className = 'addPopup' icon onClick= {() => {this.handleAdd()}}>\r\n                <Icon  size = 'big' name='add' />\r\n              </Button>\r\n              <Button  onClick = {() => {this.handlePlay()}} icon className='videoPlayButtonRight' > \r\n                <Icon  size ='massive'  name='youtube play' /> \r\n              </Button>   \r\n              <div className='myBigCenterTriangle'/>                 \r\n            </div>\r\n        }\r\n\r\n        return(\r\n\r\n          <Transition \r\n          animation={this.animation}\r\n          duration={500}\r\n          visible={this.visible}\r\n          >\r\n            <div className={'tileContainer'+this.props.side}>\r\n              <GridListTile  key={this.props.data.id} cols={1} className={this.props.gridTileClass}>\r\n                <img src={this.props.data.thumbnails[thumbsize].url} className={this.props.side} alt={this.props.data.title.concat(this.props.data.subtitle)}/>\r\n                { (this.props.side === 'OnLeft' || ((this.props.side === 'OnRight') && (!store.getState().DataLoading.rightPanel.isLoading)) ) &&\r\n                  buttons\r\n                }\r\n              </GridListTile>\r\n              <Divider />\r\n            </div>\r\n          </Transition>\r\n        );\r\n      }\r\n\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}