{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\servi\\\\Documents\\\\EZProjet\\\\YoutubeLibrary\\\\youtube-library-app\\\\src\\\\components\\\\videoTile.js\";\nimport React from 'react';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport { Icon, Button, Transition } from 'semantic-ui-react';\nimport Divider from '@material-ui/core/Divider';\nimport { store } from '../store';\nimport { showVideoPlayer, modalAction, updateListReducer, toogleVisible } from '../actions';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport './components.css';\n\nconst axios = require('axios');\n\nexport default class VideoTile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.inputName = '';\n    this.visible = true;\n    this.animation = '';\n    this.update = false;\n  }\n\n  openModal() {\n    var video = {\n      title: this.props.data.title.concat(this.props.data.subtitle),\n      thumbnails: this.props.data.thumbnails,\n      id: this.props.data.id\n    };\n    console.log('Modal opened by ' + JSON.stringify(this.props.data.title.concat(this.props.data.subtitle)));\n    store.dispatch(modalAction('open', video));\n  }\n\n  handlePlay() {\n    console.log(\"Dispatching video title : \" + this.props.data.title.concat(this.props.data.subtitle));\n    this.dispatchShowVideoPlayer({\n      title: this.props.data.title.concat(this.props.data.subtitle),\n      thumbnails: this.props.data.thumbnails,\n      id: this.props.data.id\n    });\n  }\n\n  handleDelete() {\n    var self = this;\n    this.animation = 'drop';\n    this.visible = !this.visible;\n    axios.post('http://localhost:2999/remove', {\n      body: {\n        user: store.getState().SetUser.user,\n        rmid: this.props.data.id\n      }\n    }).then(function (response) {\n      console.log(response);\n      /*self.dispatchToogleDataLoaded('leftPanel');\r\n      //self.updateLibrary(response.data.videos);\r\n      self.dispatchToogleDataLoaded('leftPanel');*/\n\n      var side;\n      if (self.props.side === 'OnLeft') side = 'leftPanel';\n      if (self.props.side === 'OnRight') side = 'rightPanel';\n      self.dispatchUpdateList(side, response.data.videos);\n    }).catch(function (err) {\n      console.log(err);\n    });\n    this.update = true;\n    toast.success(\"Video removed from your library !\");\n  }\n\n  handleAdd() {\n    var self = this;\n    var alreadyIn = false;\n    var videos = store.getState().DataLoading.leftPanel.videos;\n\n    for (let i = 0; i < videos.length; i++) {\n      if (this.props.data.id === videos[i].id) {\n        alreadyIn = true;\n        break;\n      }\n    }\n\n    if (alreadyIn) {\n      this.animation = 'shake';\n      this.visible = !this.visible;\n      toast.error(\"Video already in library !\");\n      this.dispatchUpdateList('leftPanel', store.getState().DataLoading.leftPanel.videos);\n    } else {\n      this.animation = 'pulse';\n      this.visible = !this.visible;\n      toast.success(\"Video added to library !\");\n      console.log(\"Title added : \" + JSON.stringify(this.props.data));\n      axios.post('http://localhost:2999/add', {\n        user: store.getState().SetUser.user,\n        addid: this.props.data.id,\n        addtitle: this.props.data.title.concat(this.props.data.subtitle),\n        thumbnails: JSON.stringify(this.props.data.thumbnails)\n      }).then(function (response) {\n        var disp = {\n          videos: response.data.videos\n        };\n        /*for (let i = 0; i < videos.length; i++) {\r\n          disp.videos[i]['subtitle']  =self.props.data.subtitle;\r\n          disp.videos[i]['isParsed'] = false;\r\n          \r\n        }*/\n\n        console.log(\"giving to reducer : \" + JSON.stringify(disp));\n        self.dispatchUpdateList('leftPanel', disp);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n\n    this.update = true; //console.log(\"Update asked\");\n  }\n\n  dispatchUpdateList(panel, videos) {\n    store.dispatch(updateListReducer(panel, videos));\n  }\n\n  shouldComponentUpdate() {\n    return this.update;\n  }\n\n  componentDidUpdate() {\n    console.log(\"Updating tile of \" + this.props.data.title.concat(this.props.data.subtitle));\n  }\n\n  dispatchShowVideoPlayer(video) {\n    var actualRightDisp = store.getState().ShowOnRight; //console.log(\"Previous right panel state \"+JSON.stringify(actualRightDisp))\n\n    for (var key in actualRightDisp) {\n      if (actualRightDisp[key]) actualRightDisp[key] = false;\n    }\n\n    actualRightDisp.videoToPlay = video;\n    store.dispatch(toogleVisible()); //console.log(\"LastDisp : \"+lastDisp);\n    //console.log(\"Previous right panel state modified in before dispatching SHOW VIDEO PLAYER\"+JSON.stringify(actualRightDisp))\n\n    console.log(\"Rendering tile of \" + this.props.data.title.concat(this.props.data.subtitle));\n    store.dispatch(showVideoPlayer(actualRightDisp));\n  }\n\n  render() {\n    var thumbsize;\n    if (this.props.side === 'OnLeft') thumbsize = 'medium';else thumbsize = 'high'; //console.log('State of tile \"'+this.props.data.title.concat(this.props.data.subtitle)+'\": '+JSON.stringify(store.getState()));\n\n    if (store.getState().ModalReducer.isModalOpen === true) {} //console.log('Opening modal with : '+JSON.stringify(this.props.data));\n    //console.log(\"Delete anim visible : \"+this.inOutVisible);\n\n\n    return React.createElement(Transition, {\n      animation: this.animation,\n      duration: 500,\n      visible: this.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'tileContainer' + this.props.side,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(GridListTile, {\n      key: this.props.data.id,\n      cols: 1,\n      className: this.props.gridTileClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.props.data.thumbnails[thumbsize].url,\n      className: this.props.side,\n      alt: this.props.data.title.concat(this.props.data.subtitle),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(GridListTileBar, {\n      title: this.props.data.title,\n      subtitle: this.props.data.subtitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), this.props.side === 'OnLeft' ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"editPopup\",\n      icon: true,\n      onClick: () => {\n        this.openModal();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \" \", React.createElement(Icon, {\n      name: \"edit outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    })), React.createElement(Button, {\n      className: \"deletePopup\",\n      icon: true,\n      onClick: () => {\n        this.handleDelete();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", React.createElement(Icon, {\n      name: \"delete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    })), React.createElement(Button, {\n      onClick: () => {\n        this.handlePlay();\n      },\n      icon: true,\n      className: \"videoPlayButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      size: \"huge\",\n      name: \"youtube play\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"myCenterTriangle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \" \")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"addPopup\",\n      icon: true,\n      onClick: () => {\n        this.handleAdd();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      size: \"big\",\n      name: \"add square\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), React.createElement(Button, {\n      onClick: () => {\n        this.handlePlay();\n      },\n      icon: true,\n      className: \"videoPlayButtonRight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      size: \"massive\",\n      name: \"youtube play\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"myBigCenterTriangle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \" \"))), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/servi/Documents/EZProjet/YoutubeLibrary/youtube-library-app/src/components/videoTile.js"],"names":["React","GridListTile","GridListTileBar","Icon","Button","Transition","Divider","store","showVideoPlayer","modalAction","updateListReducer","toogleVisible","toast","axios","require","VideoTile","Component","constructor","props","inputName","visible","animation","update","openModal","video","title","data","concat","subtitle","thumbnails","id","console","log","JSON","stringify","dispatch","handlePlay","dispatchShowVideoPlayer","handleDelete","self","post","body","user","getState","SetUser","rmid","then","response","side","dispatchUpdateList","videos","catch","err","success","handleAdd","alreadyIn","DataLoading","leftPanel","i","length","error","addid","addtitle","disp","panel","shouldComponentUpdate","componentDidUpdate","actualRightDisp","ShowOnRight","key","videoToPlay","render","thumbsize","ModalReducer","isModalOpen","gridTileClass","url"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport { Icon, Button, Transition } from 'semantic-ui-react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {store} from '../store';\r\nimport {showVideoPlayer, modalAction, updateListReducer, toogleVisible} from '../actions';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport './components.css';\r\n\r\nconst axios = require('axios');\r\n\r\n\r\n\r\n\r\n\r\nexport default class VideoTile extends React.Component {\r\n\r\n    constructor(props){\r\n      super(props);\r\n\r\n      this.inputName = '';\r\n      this.visible= true;\r\n      this.animation = ''\r\n      this.update = false;\r\n\r\n    }\r\n\r\n\r\n\r\n    openModal(){\r\n      var video = {\r\n        title:  this.props.data.title.concat(this.props.data.subtitle),\r\n        thumbnails: this.props.data.thumbnails,\r\n        id: this.props.data.id\r\n      } \r\n      console.log('Modal opened by '+JSON.stringify(this.props.data.title.concat(this.props.data.subtitle)));\r\n      store.dispatch(modalAction('open', video));\r\n    }\r\n\r\n\r\n    handlePlay(){\r\n      console.log(\"Dispatching video title : \"+this.props.data.title.concat(this.props.data.subtitle))\r\n      this.dispatchShowVideoPlayer({\r\n        title: this.props.data.title.concat(this.props.data.subtitle),\r\n        thumbnails: this.props.data.thumbnails,\r\n        id: this.props.data.id\r\n      });\r\n    }\r\n\r\n    handleDelete() {\r\n      var self = this;\r\n      this.animation = 'drop';\r\n      this.visible = !this.visible;\r\n    axios.post('http://localhost:2999/remove', {\r\n      body: {\r\n        user: store.getState().SetUser.user,\r\n        rmid: this.props.data.id\r\n      }\r\n    })\r\n    .then(function(response) {\r\n      console.log(response);\r\n      /*self.dispatchToogleDataLoaded('leftPanel');\r\n      //self.updateLibrary(response.data.videos);\r\n      self.dispatchToogleDataLoaded('leftPanel');*/\r\n      var side;\r\n      if(self.props.side === 'OnLeft')\r\n        side = 'leftPanel';\r\n      \r\n      if(self.props.side === 'OnRight')\r\n        side = 'rightPanel';\r\n      \r\n      self.dispatchUpdateList(side, response.data.videos);\r\n    })\r\n    .catch(function(err) {\r\n      console.log(err);\r\n    })\r\n\r\n    this.update = true;\r\n    toast.success(\"Video removed from your library !\");\r\n\r\n    }\r\n\r\n    handleAdd() {\r\n      var self = this;\r\n      var alreadyIn = false;\r\n\r\n      var videos = store.getState().DataLoading.leftPanel.videos;\r\n\r\n      for (let i = 0; i < videos.length; i++) {\r\n        if(this.props.data.id === videos[i].id){\r\n          alreadyIn = true;\r\n          break;\r\n        }\r\n      }\r\n      if(alreadyIn){\r\n        this.animation = 'shake';\r\n        this.visible = !this.visible;\r\n        toast.error(\"Video already in library !\");        \r\n        this.dispatchUpdateList('leftPanel', store.getState().DataLoading.leftPanel.videos);\r\n      }\r\n      else {\r\n\r\n        this.animation = 'pulse';\r\n        this.visible = !this.visible;\r\n        toast.success(\"Video added to library !\")\r\n        console.log(\"Title added : \"+JSON.stringify(this.props.data));\r\n        axios.post('http://localhost:2999/add', {\r\n            user: store.getState().SetUser.user,\r\n            addid: this.props.data.id,\r\n            addtitle: this.props.data.title.concat(this.props.data.subtitle),\r\n            thumbnails: JSON.stringify(this.props.data.thumbnails)\r\n        })\r\n        .then(function(response) {\r\n          var disp = {\r\n            videos: response.data.videos,\r\n          }\r\n          /*for (let i = 0; i < videos.length; i++) {\r\n            disp.videos[i]['subtitle']  =self.props.data.subtitle;\r\n            disp.videos[i]['isParsed'] = false;\r\n            \r\n          }*/\r\n          console.log(\"giving to reducer : \"+JSON.stringify(disp));\r\n          self.dispatchUpdateList('leftPanel', disp);\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        })\r\n      }\r\n\r\n      this.update = true;\r\n      //console.log(\"Update asked\");\r\n    }\r\n\r\n    dispatchUpdateList(panel, videos) {\r\n      store.dispatch(updateListReducer(panel, videos));\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    return this.update;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log(\"Updating tile of \"+this.props.data.title.concat(this.props.data.subtitle))\r\n\r\n  }\r\n\r\n\r\n    dispatchShowVideoPlayer(video) {\r\n\r\n      var actualRightDisp = store.getState().ShowOnRight;\r\n      //console.log(\"Previous right panel state \"+JSON.stringify(actualRightDisp))\r\n\r\n      for(var key in actualRightDisp){\r\n        if(actualRightDisp[key])\r\n          actualRightDisp[key] = false;\r\n      }\r\n      actualRightDisp.videoToPlay = video;\r\n      store.dispatch(toogleVisible());\r\n\r\n     //console.log(\"LastDisp : \"+lastDisp);\r\n     //console.log(\"Previous right panel state modified in before dispatching SHOW VIDEO PLAYER\"+JSON.stringify(actualRightDisp))\r\n     console.log(\"Rendering tile of \"+this.props.data.title.concat(this.props.data.subtitle))\r\n      store.dispatch(showVideoPlayer(actualRightDisp));\r\n    }\r\n\r\n      render() {\r\n\r\n        var thumbsize;\r\n        if(this.props.side === 'OnLeft')\r\n          thumbsize = 'medium';\r\n        else \r\n          thumbsize = 'high';\r\n\r\n        //console.log('State of tile \"'+this.props.data.title.concat(this.props.data.subtitle)+'\": '+JSON.stringify(store.getState()));\r\n\r\n        if(store.getState().ModalReducer.isModalOpen === true){\r\n          //console.log('Opening modal with : '+JSON.stringify(this.props.data));\r\n        }\r\n\r\n        //console.log(\"Delete anim visible : \"+this.inOutVisible);\r\n\r\n\r\n\r\n\r\n        return(\r\n\r\n\r\n          <Transition \r\n          animation={this.animation}\r\n          duration={500}\r\n          visible={this.visible}\r\n          >\r\n          <div className={'tileContainer'+this.props.side}>\r\n            <GridListTile  key={this.props.data.id} cols={1} className={this.props.gridTileClass}>\r\n                <img src={this.props.data.thumbnails[thumbsize].url} className={this.props.side} alt={this.props.data.title.concat(this.props.data.subtitle)}/>\r\n                <GridListTileBar title={this.props.data.title} subtitle={this.props.data.subtitle} >\r\n                </GridListTileBar>\r\n\r\n                { (this.props.side === 'OnLeft') \r\n                  ? <div>\r\n                      <Button className='editPopup' icon onClick={() => {this.openModal()}}> <Icon name='edit outline' /></Button>\r\n                      <Button className='deletePopup' icon onClick={() => {this.handleDelete()}}> <Icon name='delete' /></Button>\r\n                      <Button  onClick = {() => {this.handlePlay()}} icon className='videoPlayButton' > \r\n                        <Icon  size ='huge'  name='youtube play' /> \r\n                      </Button>\r\n                      <div className='myCenterTriangle'> </div>\r\n                    </div>\r\n                  : <div>\r\n                    <Button className = 'addPopup' icon onClick= {() => {this.handleAdd()}}>\r\n                      <Icon  size = 'big' name='add square' />\r\n                    </Button>\r\n                    <Button  onClick = {() => {this.handlePlay()}} icon className='videoPlayButtonRight' > \r\n                      <Icon  size ='massive'  name='youtube play' /> \r\n                    </Button>   \r\n                    <div className='myBigCenterTriangle'> </div>                 \r\n                  </div>\r\n                }\r\n            </GridListTile>\r\n              <Divider />\r\n              </div>\r\n              </Transition>\r\n\r\n\r\n        );\r\n      }\r\n\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}